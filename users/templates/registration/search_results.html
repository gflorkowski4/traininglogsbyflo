{% extends "training_logs/base.html" %}

{% block page_header %}<h1>Welcome to your Search Results</h1>

{% endblock page_header %}

{% block content %}
<form method="POST">
    {% csrf_token %}
<h3>Start Date:<input type="date" name="start_date"/> End Date:<input type="date" name="end_date"/></h3>
<h3>Number of required Hours: <input type="number" name="req_hours"/></h3>
</br>
<input class='btn btn-primary'type="submit" value="Search"/>
</form>
</br>
<h1>Summary of Training Methods:</h1>
  <table class="table table-light table-hover">
    <thead>
      <tr>
        <th scope="col">Method of Training</th>
        <th scope="col">Training Hours</th>
      </tr>
    </thead>
    
    <tbody>
    {% for method, hours in training_method_hours.items %}
      <tr>
        <th scope="row">{{ method }}</th>
        <td>{{ hours }}</td>
    {% endfor %}
      </tr>
    </tbody>
  </table>

  <h1>Individuals who did not meet the required hours:</h1>
  <table class="table table-light table-hover">
    <thead>
      <tr>
        <th scope="col">Name</th>
        <th scope="col">Training Hours</th>
      </tr>
    </thead>
    
    <tbody>
    {% for user, hours in bad_users.items %}
      <tr>
        <th scope="row">{{ user.first_name }} {{ user.last_name }}</th>
        <td>{{ hours }}</td>
      </tr>
    {% endfor %}
    </tbody>
  </table>

  <h1>Individual Hours:</h1>
  <table class="table table-light table-hover">
    <thead>
      <tr>
        <th scope="col">Name</th>
        <th scope="col">Training Hours</th>
      </tr>
    </thead>
    
    <tbody>
    {% for user, hours in total_hours.items %}
      <tr>
        <th scope="row">{{ user.first_name }} {{ user.last_name }}</th>
        <td>{{ hours }}</td>
      </tr>
    {% endfor %}
    </tbody>
  </table>

<h1>Entry Details:</h1>
  <table class="table table-light table-hover">
    <thead>
      <tr>
        <th scope="col">Student</th>
        <th scope="col">Topic</th>
        <th scope="col">Method of Training</th>
        <th scope="col">Date Training Conducted</th>
        <th scope="col">Training Hours</th>
      </tr>
    </thead>
    <tbody>
    {% for entry in data %}
      <tr>
        <th scope="row">{{ entry.topic.owner}}</th>
        <td>{{ entry.topic }}</td>
        <td>{{ entry.method_of_training }}</td>
        <td>{{ entry.date_training_conducted }}</td>
        <td>{{ entry.hours }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

{% endblock content %}